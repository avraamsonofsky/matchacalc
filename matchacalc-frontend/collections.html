<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–∏ –ø–æ–¥–±–æ—Ä–∫–∏ - LatteCalc</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700&family=Arizonia&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/typography.css">
    <link rel="stylesheet" href="css/forms-modern.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/collections.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="logo">LatteCalc</a>
            <ul class="nav-menu">
                <li><a href="login.html" id="nav-login">–í—Ö–æ–¥</a></li>
                <li><a href="register.html" id="nav-register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a></li>
                <li><a href="subscription.html">–ü–æ–¥–ø–∏—Å–∫–∞</a></li>
                <li><a href="collections.html" class="active">–ü–æ–¥–±–æ—Ä–∫–∏</a></li>
                <li><a href="index.html">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a></li>
                <li class="hidden"><a href="#" id="nav-profile">–ü—Ä–æ—Ñ–∏–ª—å</a></li>
                <li class="hidden"><a href="#" id="nav-logout">–í—ã—Ö–æ–¥</a></li>
            </ul>
        </div>
    </nav>

    <div class="collections-container">
        <!-- –ë–ª–æ–∫ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö / –±–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏ -->
        <div id="no-subscription-notice" class="notice-card hidden">
            <h2>–ü–æ–¥–±–æ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ</h2>
            <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤, –¥–æ–±–∞–≤–ª—è–π—Ç–µ –ª–æ—Ç—ã —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫–∏ —Å –¶–∏–∞–Ω –∏ –¥–µ–ª–∏—Ç–µ—Å—å –ø–æ–¥–±–æ—Ä–∫–∞–º–∏ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏.</p>
            <a href="subscription.html" class="btn-primary">–û—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</a>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ -->
        <div id="collections-content" class="hidden">
            <div class="collections-header">
                <h1>–ú–æ–∏ –ø–æ–¥–±–æ—Ä–∫–∏</h1>
                <button id="btn-create-collection" class="btn-primary">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–±–æ—Ä–∫—É
                </button>
            </div>

            <!-- –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
            <div id="empty-state" class="empty-state hidden">
                <div class="empty-icon">üìÅ</div>
                <h3>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–¥–±–æ—Ä–æ–∫</h3>
                <p>–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –ø–æ–¥–±–æ—Ä–∫—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –¥–æ–±–∞–≤–ª—è—Ç—å –æ–±—ä–µ–∫—Ç—ã –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</p>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –∫–æ–ª–ª–µ–∫—Ü–∏–π -->
            <div id="collections-list" class="collections-list"></div>
        </div>
    </div>

    <!-- –ï–¥–∏–Ω–∞—è –º–æ–¥–∞–ª–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ -->
    <div id="collection-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="modal-title">–ù–æ–≤–∞—è –ø–æ–¥–±–æ—Ä–∫–∞</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div class="collection-form-section">
                    <div class="form-group">
                        <label for="collection-name">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                        <input type="text" id="collection-name" placeholder="–û—Ñ–∏—Å—ã –ú–æ—Å–∫–≤–∞-–°–∏—Ç–∏ –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞" required>
                    </div>
                    <div class="form-group">
                        <label for="collection-description">–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                        <textarea id="collection-description" placeholder="–ü–æ–¥–±–æ—Ä–∫–∞ –ø–æ–¥ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é 7+ –ª–µ—Ç..."></textarea>
                    </div>
                </div>

                <!-- –ü—É–±–ª–∏—á–Ω–∞—è —Å—Å—ã–ª–∫–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö) -->
                <div id="public-link-container" class="public-link-container hidden">
                    <label>–ü—É–±–ª–∏—á–Ω–∞—è —Å—Å—ã–ª–∫–∞:</label>
                    <div class="public-link-row">
                        <input type="text" id="public-link-input" readonly>
                        <button id="btn-copy-link" class="btn-icon" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- –°–µ–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ª–æ—Ç–æ–≤ -->
                <div class="add-lots-section">
                    <h3>–î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç</h3>
                    <div id="manual-lot-form" class="manual-lot-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label>–ê–¥—Ä–µ—Å</label>
                                <input type="text" id="lot-address-input" placeholder="—É–ª. –¢–∞–≥–∏–ª—å—Å–∫–∞—è, –≤–ª. 4" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>–¶–µ–Ω–∞ (‚ÇΩ)</label>
                                <input type="number" id="lot-price-input" placeholder="50000000" required>
                            </div>
                            <div class="form-group">
                                <label>–ü–ª–æ—â–∞–¥—å (–º¬≤)</label>
                                <input type="number" id="lot-area-input" placeholder="150" required step="0.1">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)</label>
                                <input type="file" id="lot-image-input" accept="image/png, image/jpeg, image/jpg">
                            </div>
                        </div>
                        <button type="button" id="btn-add-lot-manual" class="btn-secondary">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é</button>
                    </div>
                </div>

                <!-- –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ª–æ—Ç–æ–≤ -->
                <div id="existing-lots-section" class="existing-lots-section hidden">
                    <h3>–û–±—ä–µ–∫—Ç—ã –≤ –ø–æ–¥–±–æ—Ä–∫–µ</h3>
                    <div id="lots-list" class="lots-grid"></div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                <div class="form-actions">
                    <button type="button" class="btn-secondary modal-cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button type="button" id="btn-publish-collection" class="btn-secondary hidden">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                            <polyline points="16 6 12 2 8 6"></polyline>
                            <line x1="12" y1="2" x2="12" y2="15"></line>
                        </svg>
                        –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
                    </button>
                    <button type="button" id="btn-save-collection" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –¥–ª—è –ª–æ—Ç–∞ -->
    <div id="lot-calculator-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>–†–∞—Å—á—ë—Ç –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="lot-info">
                    <img id="lot-image" src="" alt="–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞" class="lot-image">
                    <div class="lot-details">
                        <p><strong>–ê–¥—Ä–µ—Å:</strong> <span id="lot-address"></span></p>
                        <p><strong>–¶–µ–Ω–∞:</strong> <span id="lot-price"></span></p>
                        <p><strong>–ü–ª–æ—â–∞–¥—å:</strong> <span id="lot-area"></span> –º¬≤</p>
                    </div>
                </div>
                
                <div class="calc-controls">
                    <div class="form-group">
                        <label for="lot-scenario">–ü—Ä–æ–≥–Ω–æ–∑</label>
                        <select id="lot-scenario">
                            <option value="pes">–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω—ã–π</option>
                            <option value="base" selected>–ë–∞–∑–æ–≤—ã–π</option>
                            <option value="opt">–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="lot-report">–û—Ç—á—ë—Ç</label>
                        <select id="lot-report"></select>
                    </div>
                    <div class="form-group">
                        <label>–°—Ä–æ–∫ –≤–ª–∞–¥–µ–Ω–∏—è: <span id="lot-years-value">7</span> –ª–µ—Ç</label>
                        <input type="range" id="lot-years" min="1" max="15" value="7">
                    </div>
                </div>
                
                <button id="btn-calc-lot" class="btn-primary">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                
                <div id="lot-results" class="lot-results hidden">
                    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/collections.js"></script>
</body>
</html>
